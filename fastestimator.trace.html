

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>trace &mdash; FastEstimator 0.0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="adapt" href="fastestimator.trace.adapt.html" />
    <link rel="prev" title="logs" href="fastestimator.summary.logs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> FastEstimator
          

          
          </a>

          
            
            
              <div class="version">
                1.0a0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="learn.html">Learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="apphub.html">Example</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fastestimator.architecture.html">architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.cli.html">cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.dataset.html">dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.interpretation.html">interpretation</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.layers.html">layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.op.html">op</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.schedule.html">schedule</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.summary.html">summary</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">trace</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fastestimator.trace.adapt.html">adapt</a></li>
<li class="toctree-l3"><a class="reference internal" href="fastestimator.trace.io.html">io</a></li>
<li class="toctree-l3"><a class="reference internal" href="fastestimator.trace.metric.html">metric</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">trace</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.util.html">util</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-fastestimator.estimator">estimator</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-fastestimator.network">network</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-fastestimator.pipeline">pipeline</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">FastEstimator</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">API</a> &raquo;</li>
        
      <li>trace</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/fastestimator.trace.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-fastestimator.trace">
<span id="trace"></span><h1>trace<a class="headerlink" href="#module-fastestimator.trace" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="fastestimator.trace.adapt.html">adapt</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.adapt.html#module-fastestimator.trace.adapt.early_stopping">early_stopping</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.adapt.html#module-fastestimator.trace.adapt.lr_controller">lr_controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.adapt.html#module-fastestimator.trace.adapt.terminate_on_nan">terminate_on_nan</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fastestimator.trace.io.html">io</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.io.html#module-fastestimator.trace.io.caricature">caricature</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.io.html#module-fastestimator.trace.io.csv_logger">csv_logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.io.html#module-fastestimator.trace.io.logger">logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.io.html#module-fastestimator.trace.io.model_saver">model_saver</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.io.html#module-fastestimator.trace.io.saliency">saliency</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.io.html#module-fastestimator.trace.io.tensorboard">tensorboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.io.html#module-fastestimator.trace.io.umap">umap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fastestimator.trace.metric.html">metric</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.metric.html#module-fastestimator.trace.metric.accuracy">accuracy</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.metric.html#module-fastestimator.trace.metric.confusion_matrix">confusion_matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.metric.html#module-fastestimator.trace.metric.dice">dice</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.metric.html#module-fastestimator.trace.metric.f1_score">f1_score</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.metric.html#module-fastestimator.trace.metric.precision">precision</a></li>
<li class="toctree-l2"><a class="reference internal" href="fastestimator.trace.metric.html#module-fastestimator.trace.metric.recall">recall</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="id1">
<h2>trace<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="fastestimator.trace.trace.Trace">
<em class="property">class </em><code class="sig-prename descclassname">fastestimator.trace.trace.</code><code class="sig-name descname">Trace</code><span class="sig-paren">(</span><em class="sig-param">inputs=None</em>, <em class="sig-param">outputs=None</em>, <em class="sig-param">mode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fastestimator/trace/trace.html#Trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.Trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Trace base class. User can use <cite>Trace</cite> to customize their own operations during training, validation and testing.
The <cite>Network</cite> instance can be accessible by <cite>self.network</cite>. Trace execution order will attempt to be inferred
whenever possible based on the provided inputs and outputs variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<em>str</em><em>, </em><em>list</em><em>, </em><em>set</em>) – A set of keys that this trace intends to read from the state dictionary as inputs</p></li>
<li><p><strong>outputs</strong> (<em>str</em><em>, </em><em>list</em><em>, </em><em>set</em>) – A set of keys that this trace intends to write into the state dictionary</p></li>
<li><p><strong>mode</strong> (<em>string</em>) – Restrict the trace to run only on given modes (‘train’, ‘eval’, ‘test’). None will always
execute</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="fastestimator.trace.trace.Trace.on_begin">
<code class="sig-name descname">on_begin</code><span class="sig-paren">(</span><em class="sig-param">state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fastestimator/trace/trace.html#Trace.on_begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.Trace.on_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs once at the beginning of training</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ChainMap</em>) – <p>dictionary of run time that has the following key(s):</p>
<ul class="simple">
<li><p>”train_step” (int): current global training step starting from 0</p></li>
<li><p>”num_devices” (int): number of devices(mainly gpu) that are being used, if cpu only, the number is 1</p></li>
<li><p>”log_steps” (int): how many training steps between logging intervals</p></li>
<li><p>”persist_summary” (bool): whether to persist the experiment history/summary</p></li>
<li><p>”total_epochs” (int): how many epochs the training is scheduled to run for</p></li>
<li><p>”total_train_steps” (int): how many training steps the training is scheduled to run for</p></li>
<li><p>any keys written by ‘on_begin’ of previous traces</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fastestimator.trace.trace.Trace.on_epoch_begin">
<code class="sig-name descname">on_epoch_begin</code><span class="sig-paren">(</span><em class="sig-param">state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fastestimator/trace/trace.html#Trace.on_epoch_begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.Trace.on_epoch_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs at the beginning of each epoch of the mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ChainMap</em>) – <p>dictionary of run time that has the following key(s):</p>
<ul class="simple">
<li><p>”mode” (str):  current run time mode, can be “train”, “eval” or “test”</p></li>
<li><p>”epoch” (int): current epoch index starting from 0</p></li>
<li><p>”train_step” (int): current global training step starting from 0</p></li>
<li><p>any keys written by ‘on_epoch_begin’ of previous traces</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fastestimator.trace.trace.Trace.on_batch_begin">
<code class="sig-name descname">on_batch_begin</code><span class="sig-paren">(</span><em class="sig-param">state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fastestimator/trace/trace.html#Trace.on_batch_begin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.Trace.on_batch_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs at the beginning of every batch of the mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ChainMap</em>) – <p>dictionary of run time that has the following key(s):</p>
<ul class="simple">
<li><p>”mode” (str): current run time mode, can be “train”, “eval” or “test”</p></li>
<li><p>”epoch” (int): current epoch index starting from 0</p></li>
<li><p>”train_step” (int): current global training step starting from 0</p></li>
<li><p>”batch_idx” (int): current local step of the epoch starting from 0</p></li>
<li><p>”batch_size” (int): current global batch size</p></li>
<li><p>any keys written by ‘on_batch_begin’ of previous traces</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fastestimator.trace.trace.Trace.on_batch_end">
<code class="sig-name descname">on_batch_end</code><span class="sig-paren">(</span><em class="sig-param">state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fastestimator/trace/trace.html#Trace.on_batch_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.Trace.on_batch_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs at the end of every batch of the mode. Anything written to the top level of the state dictionary will be
printed in the logs. Things written only to the batch sub-dictionary will not be logged</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ChainMap</em>) – <p>dictionary of run time that has the following key(s):</p>
<ul class="simple">
<li><p>”mode” (str):  current run time mode, can be “train”, “eval” or “test”</p></li>
<li><p>”epoch” (int): current epoch index starting from 0</p></li>
<li><p>”train_step” (int): current global training step starting from 0</p></li>
<li><p>”batch_idx” (int): current local step of the epoch starting from 0</p></li>
<li><p>”batch_size” (int): current global batch size</p></li>
<li><p>”batch” (dict): the batch data after the Network execution</p></li>
<li><p>&lt;loss_name&gt; defined in model (float): loss of current batch (only available when mode is “train”)</p></li>
<li><p>any keys written by ‘on_batch_end’ of previous traces</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fastestimator.trace.trace.Trace.on_epoch_end">
<code class="sig-name descname">on_epoch_end</code><span class="sig-paren">(</span><em class="sig-param">state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fastestimator/trace/trace.html#Trace.on_epoch_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.Trace.on_epoch_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs at the end of every epoch of the mode. Anything written into the state dictionary will be logged</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ChainMap</em>) – <p>dictionary of run time that has the following key(s):</p>
<ul class="simple">
<li><p>”mode” (str):  current run time mode, can be “train”, “eval” or “test”</p></li>
<li><p>”epoch” (int): current epoch index starting from 0</p></li>
<li><p>”train_step” (int): current global training step starting from 0</p></li>
<li><p>&lt;loss_name&gt; defined in model (float): average loss of the epoch (only available when mode is “eval”)</p></li>
<li><p>any keys written by ‘on_epoch_end’ of previous traces</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fastestimator.trace.trace.Trace.on_end">
<code class="sig-name descname">on_end</code><span class="sig-paren">(</span><em class="sig-param">state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fastestimator/trace/trace.html#Trace.on_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.Trace.on_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs once at the end training. Anything written into the state dictionary will be logged</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ChainMap</em>) – <p>dictionary of run time that has the following key(s):</p>
<ul class="simple">
<li><p>”train_step” (int): current global training step starting from 0</p></li>
<li><p>”epoch” (int): current epoch index starting from 0</p></li>
<li><p>”num_devices” (int): number of devices (mainly gpu) that are being used. If cpu only, the number is 1</p></li>
<li><p>”summary” (Experiment): will be returned from estimator.fit() if a summary input was specified</p></li>
<li><p>any keys written by ‘on_end’ of previous traces</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="fastestimator.trace.trace.TrainInfo">
<em class="property">class </em><code class="sig-prename descclassname">fastestimator.trace.trace.</code><code class="sig-name descname">TrainInfo</code><a class="reference internal" href="_modules/fastestimator/trace/trace.html#TrainInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.TrainInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fastestimator.trace.trace.Trace" title="fastestimator.trace.trace.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">fastestimator.trace.trace.Trace</span></code></a></p>
<p>Essential training information for logging during training. Please don’t add this trace into an estimator
manually. An estimator will add it automatically.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_steps</strong> (<em>int</em>) – Interval steps of logging</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="fastestimator.trace.trace.MonitorLoss">
<em class="property">class </em><code class="sig-prename descclassname">fastestimator.trace.trace.</code><code class="sig-name descname">MonitorLoss</code><a class="reference internal" href="_modules/fastestimator/trace/trace.html#MonitorLoss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fastestimator.trace.trace.MonitorLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fastestimator.trace.trace.Trace" title="fastestimator.trace.trace.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">fastestimator.trace.trace.Trace</span></code></a></p>
<p>Records loss value. Please don’t add this trace into an estimator manually. An estimator will add it
automatically.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="fastestimator.trace.adapt.html" class="btn btn-neutral float-right" title="adapt" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fastestimator.summary.logs.html" class="btn btn-neutral float-left" title="logs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, GEHC DataScience

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>